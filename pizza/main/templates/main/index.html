{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PizzaDeliveryClub</title>
    <link rel="stylesheet" href="{% static 'main/css/styles.css' %}">
</head>
<body>
    <header class="container">
        <div id="notification" class="notification-hidden">–ê–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω!</div>
        <span class="logo">Pizza House</span>
        <nav>
            <ul>
                {% if user.is_authenticated %}
                    <li class="user-info">
                        <span class="user-email">{{ user.email }}</span>
                        <span class="user-address" id="user-address">
                            {% if user.address %}
                                –ê–¥—Ä–µ—Å: {{ user.address }}, –∫–≤. {{ user.apartment }}, —ç—Ç–∞–∂ {{ user.floor }}
                            {% else %}
                                –ê–¥—Ä–µ—Å –Ω–µ —É–∫–∞–∑–∞–Ω
                            {% endif %}
                        </span>
                        <div class="header-buttons">
                            <button id="show-orders" class="map-btn" onclick="window.location.href='/orders/my/'">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
                            <button id="change-address" class="map-btn">–ò–∑–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å</button>
                            <a href="/logout/" class="logout-btn">–í—ã–π—Ç–∏</a>
                        </div>
                        <div id="map-modal" class="modal">
                            <div class="modal-content">
                                <span class="close">&times;</span>
                                <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
                                <div id="map"></div>
                                <input type="text" id="address-input" placeholder="–ê–¥—Ä–µ—Å –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∑–¥–µ—Å—å" readonly>
                                <input type="text" id="apartment-input" placeholder="–ö–≤–∞—Ä—Ç–∏—Ä–∞" required>
                                <input type="text" id="entrance-input" placeholder="–ü–æ–¥—ä–µ–∑–¥" required>
                                <input type="text" id="floor-input" placeholder="–≠—Ç–∞–∂" required>
                                <button id="save-address">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–¥—Ä–µ—Å</button>
                            </div>
                        </div>
                    </li>
                {% else %}
                    <li class="button">
                        <a href="#" id="open_pop_up">–í–æ–π—Ç–∏</a>
                    </li>
                {% endif %}
                <li><a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                <li><a href="#">–û –Ω–∞—Å</a></li>
            </ul>
        </nav>
    </header>

    {# ---- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–æ–≤–∞—Ä—ã ---- #}
    {% for category, products in categories.items %}
    <div class="container">
        <h2 style="font-size:32px; margin-bottom: 24px;">{{ category }}</h2>
        <div class="products-list">
            {% for product in products %}
            <div class="block">
                <img src="{% static product.image %}" alt="{{ product.name }}">
                <span class="l12">
                    <l1>{{ product.name }}</l1>
                    <l2>{{ product.price }} —Ä.</l2>
                </span>
                <span class="l33">
                    <l3 class="btn">
                        <a href="#" class="add-to-cart"
                           data-product-id="{{ product.id }}"
                           data-product-name="{{ product.name }}"
                           data-price="{{ product.price }}">
                            –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                        </a>
                    </l3>
                </span>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}

    <div class="wrapper">
        <footer class="container">
            <span class="logo">Pizza House</span>
            <nav>
                <ul>
                    <li><a href="#">–†–∞–±–æ—Ç–∞</a></li>
                    <li><a href="#">–ü–∞—Ä—Ç–Ω–µ—Ä–∞–º</a></li>
                    <li><a href="#">–≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ</a></li>
                </ul>
            </nav>
        </footer>
    </div>

    <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
    <div class="cart-icon" id="cart-icon">üõí<span class="cart-count">0</span></div>
    <div class="cart-dropdown" id="cart-dropdown">
        <h4>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h4>
        <div class="cart-items" id="cart-items">
            <!-- –¢—É—Ç –±—É–¥—É—Ç —Ç–æ–≤–∞—Ä—ã -->
        </div>
        <div class="cart-total">–ò—Ç–æ–≥–æ: <span id="total-price">0</span> —Ä—É–±.</div>
        <button class="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        <button id="clear-cart" type="button" class="clear-cart-btn">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>

    <div class="pop_up" id="pop_up">
        <div class="pop_up_container">
            <div class="pop_up_body">
                <div id="email_step">
                    <p>–í—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç</p>
                    <form id="auth_form">
                        <input type="email" placeholder="–í–∞—à email" required>
                        <button type="submit">–í—ã—Å–ª–∞—Ç—å –∫–æ–¥</button>
                    </form>
                </div>

                <div id="code_step" style="display: none;">
                    <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</p>
                    <form id="confirm_form">
                        <input type="text" placeholder="4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥" required>
                        <button type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                    </form>
                </div>

                <div class="pop_up_close" id="pop_up_close">&#10006</div>
            </div>
        </div>
    </div>

    <script src="{% static 'main/js/scripts.js' %}"></script>
</body>
</html>